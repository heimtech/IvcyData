var IconPicker=new Class({Implements:[Options],elements:{container:null,preview:null,input:null,button:null},options:{width:740,title:""},initialize:function(c,b){var a=this;a.elements.container=c;a.elements.preview=c.getElement(".preview span");a.elements.input=c.getElement('input[type="text"]');a.elements.button=c.getElement("a");a.setOptions(b);a.elements.input.addEvent("keyup",function(){a.elements.preview.set("class",this.get("value"))});a.elements.button.addEvent("click",function(d){d.preventDefault();Backend.getScrollOffset();a.openModal(a.elements.button.get("href"))})},openModal:function(c){var b=this;var a=(window.getSize().y-180).toInt();if(!b.options.height||b.options.height>a){b.options.height=a}var d=new SimpleModal({width:b.options.width,hideFooter:true,draggable:false,overlayOpacity:0.5,onShow:function(){document.body.setStyle("overflow","hidden")},onHide:function(){document.body.setStyle("overflow","auto")}});d.show({title:b.options.title,model:"modal-ajax",param:{url:c,onRequestComplete:function(){b.initModal(d)}}})},initModal:function(c){var a=this;var b=$("iconpicker-popup-icons").getChildren();var d=function(e){Array.each(b,function(f){if(e.length==""||f.get("data-tags").indexOf(e)!=-1){f.setStyle("display","block")}else{f.setStyle("display","none")}})};Array.each(b,function(e){e.addEvent("click",function(){var f=this.get("data-value");a.elements.input.set("value",f);a.elements.preview.set("class",f);c.hide()})});$("iconpicker-popup-keyword").addEvent("keyup",function(){d(this.get("value"))})}});